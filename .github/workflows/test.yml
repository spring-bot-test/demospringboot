name: Dependent Workflow
on:
  workflow_run:
    workflows: ["Semantic Versioning"]  # Name of the first workflow
    types:
      - completed

jobs:
  run_after_first_workflow:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    - name: Run some tasks after the first workflow
      run: echo "This runs after the first workflow is completed successfully"
    - name: Extract application version and artifactId from pom.xml
      run: |
        version=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)
        echo "version=$version"
        artifactId=$(mvn help:evaluate -Dexpression=project.artifactId -q -DforceStdout)
        echo "artifactId=$artifactId"
